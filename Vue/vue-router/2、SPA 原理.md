# SPA（Single Page Web Application）
单页Web应用，就是只有一张Web页面的应用。SPA 是加载单个 HTML 页面并在用户与应用程序交互时动态更新该页面的Web应用程序。浏览器一开始会加载必需的HTML、CSS和JavaScript，所有的操作都在这张页面上完成，都由JavaScript来控制。因此，对单页应用来说模块化的开发和设计显得相当重要。

## 优点
- 避免了页面跳转（切换），就没有白屏阻塞，
- 因而提供了更加流畅的用户体验（让用户在web app感受native app的速度和流畅）
- 因而可以节省原生（Android和 iOS）APP 的开发成本（如果应用于移动端开发）
- 而且可以提高发布效率，无需每次安装更新包（如果应用于移动端开发）

## 缺点
- 效果和性能与原生还有较大差距
- 各版本浏览器兼容性不一致
- 业务随着代码量增加而增加，不利于首屏优化
- 不利于搜索引擎抓取

## url 路径里的 #!
由于我们在处理单页应用的时候页面是不刷新的，所以会导致我们的网页记录和内容很难被搜索引擎抓取到。搜索引擎抓取页面首先要遵循http协议，可是#不是协议内的内容。而实际上也是这样，我们没有见过搜索引擎的搜索结果中，哪一条记录可以快速定位到网页内的某个位置的。**解决的方法是用 #!号代替#号，因为谷歌会抓取带有#!的URL。（Google规定，如果你希望Ajax生成的内容被浏览引擎读取，那么URL中可以使用”#!”**(这种URL在一般页面一般不会产生定位效果)），这样我们可以解决ajax的不被搜索引擎抓取的问题。在vueJs里面，我们可以看到作者就是这样做的。

Reference

-  [阮一峰-URL 的井号](http://www.ruanyifeng.com/blog/2011/03/url_hash.html)
-  [搜索引擎会不会抓取带#号(哈希值)的URL](http://www.admin5.com/article/20130614/509297.shtml)

## SPA 实现原理
- 监听地址栏中 hash 变化驱动界面变化
- 用 pushstate 记录浏览器的历史，驱动界面变化
- 直接在界面用普通事件驱动界面变化

前两种方式较为普遍，因为它们的变化记录浏览器会保存在history中，可以通过回退/前进按钮找回，或者history对象中的方法控制。最后一种方法是用普通事件驱动的，没有改变浏览器的history对象，所以一旦用户按了返回按钮将会退到浏览器的主界面。所以，一般采用前两种方式。**值得一提的是，在不支持hash监听和pushsate变化的浏览器中可以考虑用延时函数，不停得去监听浏览器地址栏中url发生的变化，从而驱动界面变化**