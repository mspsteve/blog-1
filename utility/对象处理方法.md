### 获取/设置 对象给定路径的值

```js
/**
 * 获取对象给定 key 的 value 值
 *
 * 例如：getValueWithStringKey(obj, 'a.b.c')
 */

function getValueWithStringKey(obj, key) {
  if (!isObject(obj)) {
    throw new Error(`the first param ${obj} is not an object`)
  }
  if (!isString(key)) {
    throw new Error(`the key ${key} is not a 'string'`)
  }
  let paths = key.trim().split('.')
  let lastKey = paths.pop()

  if (lastKey === '') {
    throw new Error(`the key ${key} is not valid`)
  }

  let donePath = ''

  for (let i = 0, len = paths.length; i < len; i++) {
    let subKey = paths[i]
    let subValue = obj[subKey]

    // 已经走过的路径，用于子路径不是对象时报错
    donePath += donePath ? '.' + subKey : subKey

    if (!isObject(subValue)) {
      throw new Error(`the value of the path ${donePath} is not an object`)
    }

    obj = subValue
  }

  return obj[lastKey]
}

/**
 * 设置对象给定 key 的 value 值
 *
 * 例如：setValueWithStringKey(obj, 'a.b.c', 2)
 */
function setValueWithStringKey(obj, key, value) {
  if (!isObject(obj)) {
    throw new Error(`the first param ${obj} is not an object`)
  }

  if (!isString(key)) {
    throw new Error(`the key ${key} is not a 'string'`)
  }

  let paths = key.trim().split('.')
  let lastKey = paths.pop()

  if (lastKey === '') {
    throw new Error(`the key ${key} is not valid`)
  }

  let donePath = ''

  for(let i = 0, len = paths.length; i < len; i++) {
    let subKey = paths[i]
    let subValue = obj[subKey]

    // 已经走过的路径，用于子路径有值但不是对象时报错
    donePath += donePath ? '.' + subKey : subKey

    if (subValue === undefined) {
      subValue = obj[subKey] = {}
    } else if (!isObject(subValue)) {
      throw new Error(`the value of the path ${donePath} is not an object`)
    }

    obj = subValue
  }

  obj[lastKey] = value
}

function isObject(obj) {
  return Object.prototype.toString.call(obj) === '[object Object]'
}

function isString(string) {
  return typeof string === 'string'
}
```